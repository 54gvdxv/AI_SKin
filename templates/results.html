<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kết quả phân tích da - NayaGrow</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='modern-style.css') }}">
</head>
<body>
    <div class="animated-bg"></div>
    
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="/">
                <img src="https://nayagrow.phamthong.com/logo1.png" alt="NayaGrow Logo">
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/">
                    <i class="fas fa-home me-1"></i>
                    Trang chủ
                </a>
                <a class="nav-link" href="/upload">
                    <i class="fas fa-camera me-1"></i>
                    Phân tích mới
                </a>
            </div>
        </div>
    </nav>

    <!-- Results Section -->
    <div class="results-container">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="result-card">
                        <!-- Header -->
                        <div class="text-center mb-5">
                            <h1 class="display-5 fw-bold mb-3">
                                <i class="fas fa-chart-line text-success me-3"></i>
                                Kết quả phân tích da
                            </h1>
                            <p class="lead text-muted">
                                AI đã phân tích ảnh của bạn và đưa ra kết quả chi tiết
                            </p>
                        </div>

                        <div class="row">
                            <!-- Image Section -->
                            <div class="col-lg-5 text-center mb-4">
                                <div class="position-relative">
                                    <img src="{{ image_path }}" 
                                         alt="Ảnh đã phân tích" 
                                         class="result-image">
                                    <div class="position-absolute top-0 end-0 m-2">
                                        <span class="badge bg-success">
                                            <i class="fas fa-check me-1"></i>
                                            Đã phân tích
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <!-- Results Section -->
                            <div class="col-lg-7">
                                <!-- Condition Result -->
                                <div class="mb-4">
                                    <h3 class="fw-bold mb-3">
                                        <i class="fas fa-diagnoses text-primary me-2"></i>
                                        Tình trạng da của bạn:
                                    </h3>
                                    <div class="condition-badge">
                                        {{ condition }}
                                    </div>
                                </div>

                                <!-- Treatment Recommendations -->
                                <div class="treatment-list">
                                    <h4 class="fw-bold mb-3">
                                        <i class="fas fa-prescription-bottle-alt text-info me-2"></i>
                                        Gợi ý chăm sóc:
                                    </h4>
                                    {% for step in treatment %}
                                    <div class="treatment-item">
                                        <i class="fas fa-check-circle text-success me-2"></i>
                                        {{ step }}
                                    </div>
                                    {% endfor %}
                                </div>

                                <!-- Action Buttons -->
                                <div class="text-center mt-4">
                                    <a href="/upload" class="btn-modern me-3">
                                        <i class="fas fa-redo me-2"></i>
                                        Phân tích lại
                                    </a>
                                    <button class="btn-outline-modern" onclick="shareResults()">
                                        <i class="fas fa-share-alt me-2"></i>
                                        Chia sẻ kết quả
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Recommended Products -->
                        <div class="mt-5">
                            <h3 class="fw-bold text-center mb-4">
                                <i class="fas fa-shopping-bag text-warning me-2"></i>
                                Sản phẩm được khuyên dùng
                            </h3>
                            <div class="row g-4">
                                <div class="col-lg-4 col-md-6">
                                    <div class="product-card h-100">
                                        <img src="https://media1.popsugar-assets.com/files/thumbor/p1Q_1mDEPg-Ot4yDz-Ts52GnqiY/fit-in/1024x1024/filters:format_auto-!!-:strip_icc-!!-/2022/10/24/866/n/1922153/d171cdba234ceab4_netimgD44MBC/i/For-Clear-Skin-CeraVe-Acne-Skin-Care-Set.jpg" 
                                             class="card-img-top" 
                                             alt="Bộ sản phẩm trị mụn">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="fas fa-droplet text-primary me-2"></i>
                                                Bộ sản phẩm trị mụn
                                            </h5>
                                            <p class="card-text">Bộ sản phẩm chuyên biệt giúp làm sạch sâu, giảm mụn và ngăn ngừa mụn tái phát.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="badge bg-success">Phù hợp</span>
                                                <div class="text-warning">
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-6">
                                    <div class="product-card h-100">
                                        <img src="https://thesafabeauty.com/cdn/shop/files/axisserum.webp?v=1698344904&width=1946" 
                                             class="card-img-top" 
                                             alt="Serum xóa thâm">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="fas fa-magic text-info me-2"></i>
                                                Serum xóa thâm nám
                                            </h5>
                                            <p class="card-text">Serum chuyên sâu giúp làm mờ thâm nám, đều màu da và tăng độ sáng tự nhiên.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="badge bg-info">Hiệu quả</span>
                                                <div class="text-warning">
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="far fa-star"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-6">
                                    <div class="product-card h-100">
                                        <img src="https://spy.com/wp-content/uploads/2020/10/Remedial-Retinol-Face-Cream.jpg?resize=525" 
                                             class="card-img-top" 
                                             alt="Kem chống lão hóa">
                                        <div class="card-body">
                                            <h5 class="card-title">
                                                <i class="fas fa-leaf text-success me-2"></i>
                                                Kem chống lão hóa
                                            </h5>
                                            <p class="card-text">Kem dưỡng cao cấp với Retinol giúp giảm nếp nhăn và tăng độ đàn hồi cho da.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="badge bg-warning">Premium</span>
                                                <div class="text-warning">
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                    <i class="fas fa-star"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Additional Tips -->
                        <div class="mt-5">
                            <div class="glass-card p-4">
                                <h4 class="fw-bold mb-3">
                                    <i class="fas fa-lightbulb text-warning me-2"></i>
                                    Lời khuyên thêm:
                                </h4>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-sun text-warning me-2 mt-1"></i>
                                            <div>
                                                <strong>Bảo vệ khỏi tia UV</strong>
                                                <p class="mb-0 text-muted small">Luôn sử dụng kem chống nắng SPF 30+ mỗi ngày</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-tint text-info me-2 mt-1"></i>
                                            <div>
                                                <strong>Duy trì độ ẩm</strong>
                                                <p class="mb-0 text-muted small">Uống đủ nước và dưỡng ẩm đều đặn</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-apple-alt text-success me-2 mt-1"></i>
                                            <div>
                                                <strong>Chế độ ăn lành mạnh</strong>
                                                <p class="mb-0 text-muted small">Bổ sung vitamin và chất chống oxy hóa</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="d-flex align-items-start">
                                            <i class="fas fa-bed text-primary me-2 mt-1"></i>
                                            <div>
                                                <strong>Ngủ đủ giấc</strong>
                                                <p class="mb-0 text-muted small">7-8 tiếng mỗi đêm để da tự phục hồi</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="text-center">
                <p class="mb-0">&copy; 2025 NayaGrow. Tất cả quyền được bảo lưu.</p>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Share results function
        function shareResults() {
            if (navigator.share) {
                navigator.share({
                    title: 'Kết quả phân tích da - NayaGrow',
                    text: 'Tôi vừa phân tích da với AI của NayaGrow. Kết quả rất chi tiết!',
                    url: window.location.href
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                const url = window.location.href;
                navigator.clipboard.writeText(url).then(() => {
                    alert('Đã sao chép link kết quả vào clipboard!');
                });
            }
        }

        // Add animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe all cards
        document.querySelectorAll('.product-card, .treatment-item').forEach(card => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(card);
        });

        // Add stagger effect to treatment items
        document.querySelectorAll('.treatment-item').forEach((item, index) => {
            setTimeout(() => {
                item.style.opacity = '1';
                item.style.transform = 'translateY(0)';
            }, index * 200);
        });
    </script>
</body>
</html>